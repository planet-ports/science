<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>3&nbsp;Error Handling</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Science Collection:</span> Reference Manual</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="introduction.html" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="using.html" class="tocviewlink" data-pltdoc="x">Using the Science Collection</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Error Handling</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="mathematical-functions.html" class="tocviewlink" data-pltdoc="x">Mathematical Functions</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="special-functions.html" class="tocviewlink" data-pltdoc="x">Special Functions</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="random-numbers.html" class="tocviewlink" data-pltdoc="x">Random Number Generation</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="random-distributions.html" class="tocviewlink" data-pltdoc="x">Random Number Distributions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="statistics.html" class="tocviewlink" data-pltdoc="x">Statistics</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="histograms.html" class="tocviewlink" data-pltdoc="x">Histograms</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="ode.html" class="tocviewlink" data-pltdoc="x">Ordinary Differential Equations</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="chebyshev.html" class="tocviewlink" data-pltdoc="x">Chebyshev Approximations</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="fft.html" class="tocviewlink" data-pltdoc="x">Fast Fourier Transforms</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="physical-constants.html" class="tocviewlink" data-pltdoc="x">Physical Constants</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="unsafe-ops-utils.html" class="tocviewlink" data-pltdoc="x">Unsafe Operations Utilities</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="gfdl.html" class="tocviewlink" data-pltdoc="x">GNU Free Documentation License</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" data-pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Error Handling</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._.Contracts%29" class="tocviewlink" data-pltdoc="x">Contracts</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._.Infinities_and_.Not-a-.Number%29" class="tocviewlink" data-pltdoc="x">Infinities and Not-<wbr></wbr>a-<wbr></wbr>Number</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._.Exceptions%29" class="tocviewlink" data-pltdoc="x">Exceptions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#(part._.Contracts)" class="tocsubseclink" data-pltdoc="x">Contracts</a></td></tr><tr><td><span class="tocsublinknumber">3.1.1<tt>&nbsp;</tt></span><a href="#(part._.Fixed_.Number_of_.Arguments_with_a_.Single_.Result)" class="tocsubseclink" data-pltdoc="x">Fixed Number of Arguments with a Single Result</a></td></tr><tr><td><span class="tocsublinknumber">3.1.2<tt>&nbsp;</tt></span><a href="#(part._.Multiple_.Lambda_.Forms__case-lambda_)" class="tocsubseclink" data-pltdoc="x">Multiple Lambda Forms (<span class="RktSym"><span class="RktStxLink">case-<wbr></wbr>lambda</span></span>)</a></td></tr><tr><td><span class="tocsublinknumber">3.1.3<tt>&nbsp;</tt></span><a href="#(part._.Interparameter_.Constraints)" class="tocsubseclink" data-pltdoc="x">Interparameter Constraints</a></td></tr><tr><td><span class="tocsublinknumber">3.1.4<tt>&nbsp;</tt></span><a href="#(part._.Unchecked_.Operations)" class="tocsubseclink" data-pltdoc="x">Unchecked Operations</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#(part._.Infinities_and_.Not-a-.Number)" class="tocsubseclink" data-pltdoc="x">Infinities and Not-<wbr></wbr>a-<wbr></wbr>Number</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#(part._.Exceptions)" class="tocsubseclink" data-pltdoc="x">Exceptions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="using.html" title="backward to &quot;2 Using the Science Collection&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Science Collection: Reference Manual&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="mathematical-functions.html" title="forward to &quot;4 Mathematical Functions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._error-handling)"></a>Error Handling</h3><table cellspacing="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Contracts%29" class="toclink" data-pltdoc="x">3.1<span class="hspace">&nbsp;</span>Contracts</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Fixed_.Number_of_.Arguments_with_a_.Single_.Result%29" class="toclink" data-pltdoc="x">3.1.1<span class="hspace">&nbsp;</span>Fixed Number of Arguments with a Single Result</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Multiple_.Lambda_.Forms__case-lambda_%29" class="toclink" data-pltdoc="x">3.1.2<span class="hspace">&nbsp;</span>Multiple Lambda Forms (<span class="RktSym"><span class="RktStxLink">case-lambda</span></span>)</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Interparameter_.Constraints%29" class="toclink" data-pltdoc="x">3.1.3<span class="hspace">&nbsp;</span>Interparameter Constraints</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Unchecked_.Operations%29" class="toclink" data-pltdoc="x">3.1.4<span class="hspace">&nbsp;</span>Unchecked Operations</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Infinities_and_.Not-a-.Number%29" class="toclink" data-pltdoc="x">3.2<span class="hspace">&nbsp;</span>Infinities and Not-a-Number</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Exceptions%29" class="toclink" data-pltdoc="x">3.3<span class="hspace">&nbsp;</span>Exceptions</a></p></td></tr></table><p>This chapter describes how error handling is performed in the Science Collection and its error handling conventions.</p><h4>3.1<tt>&nbsp;</tt><a name="(part._.Contracts)"></a>Contracts</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>For more information, see <a href="http://docs.racket-lang.org/reference/contracts.html">Contracts</a> in the Racket Reference Manual or <a href="http://docs.racket-lang.org/guide/contracts.html">Contracts</a> in the Racket Guide.</p></blockquote></blockquote></blockquote><p>The Science Collection uses contracts to define and enforce the interfaces for all of the functions provided by the modules in the collection.  This ensures that all calls to these functions are checked for proper number and type of arguments (and results), as well as range checking and interargument constraints, where practical.</p><p>All of the function definitions in the manual include a specification of the contract for the function.</p><p>The following examples show some of the different contract specifications for functions and how to interpret them.  All of these examples are from the statistics module (<span class="stt">"statistics.rkt"</span>).</p><h5>3.1.1<tt>&nbsp;</tt><a name="(part._.Fixed_.Number_of_.Arguments_with_a_.Single_.Result)"></a>Fixed Number of Arguments with a Single Result</h5><p><span style="font-weight: bold">Example:</span> <span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._mean%29%29" class="RktValLink" data-pltdoc="x">mean</a></span> from the statistics module.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L3ByaXZh%0D%0AdGUvcHJvdmlkZS5ya3QiKSBwcm92aWRlL2NvbnRyYWN0KSkp%0D%0A" class="RktStxLink" data-pltdoc="x">provide/contract</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._mean%29%29" class="RktValLink" data-pltdoc="x">mean</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L2Jhc2Uu%0D%0Acmt0IikgLT4pKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This contract specifies a function with one argument that must match the contract <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span> and returns a single result that must match the contract <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span>.</div></p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">&gt; (require (planet williams/science/statistics))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (mean #(1 2 3 4))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2.5</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (mean #(1 2 5 a))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">top-level broke the contract (-&gt; (vectorof real?) real?) on mean; expected &lt;(vectorof real?)&gt;, given: #(1 2 5 a)</span></span></p></td></tr></table></p><h5>3.1.2<tt>&nbsp;</tt><a name="(part._.Multiple_.Lambda_.Forms__case-lambda_)"></a>Multiple Lambda Forms (<span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKHF1b3RlICMla2VybmVsKSBjYXNlLWxhbWJk%0D%0AYSkpKQ%3D%3D%0D%0A" class="RktStxLink" data-pltdoc="x">case-lambda</a></span>)</h5><p><span style="font-weight: bold">Example:</span> <span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._variance%29%29" class="RktValLink" data-pltdoc="x">variance</a></span> from the statistics module.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>PLT Scheme 4.0 &#8212;<wbr></wbr> Racket was formerly known as PLT Scheme &#8212;<wbr></wbr> introduced direct support of optional arguments in <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L3ByaXZhdGUvYmFzZS5y%0D%0Aa3QiKSBsYW1iZGEpKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x">lambda</a></span>.  At some point, the uses of multiple lambda forms to specify optional arguments will be converted to single <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L3ByaXZhdGUvYmFzZS5y%0D%0Aa3QiKSBsYW1iZGEpKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x">lambda</a></span> forms with optional arguments.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L3ByaXZh%0D%0AdGUvcHJvdmlkZS5ya3QiKSBwcm92aWRlL2NvbnRyYWN0KSkp%0D%0A" class="RktStxLink" data-pltdoc="x">provide/contract</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._variance%29%29" class="RktValLink" data-pltdoc="x">variance</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L2Jhc2Uu%0D%0Acmt0IikgY2FzZS0%2BKSkp%0D%0A" class="RktStxLink" data-pltdoc="x">case-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L2Jhc2Uu%0D%0Acmt0IikgLT4pKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS9taXNjLnJrdCIpID49L2MpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">&gt;=/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L2Jhc2Uu%0D%0Acmt0IikgLT4pKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS9taXNjLnJrdCIpID49L2MpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">&gt;=/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The contract specifies multiple lambda forms using <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L2Jhc2Uu%0D%0Acmt0IikgY2FzZS0%2BKSkp%0D%0A" class="RktStxLink" data-pltdoc="x">case-&gt;</a></span>.  The first case specifies a function with two arguments, <span class="RktSym">data</span> and <span class="RktSym">mu</span>, that must match the contracts <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span> and <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span> and returns a single value that must match the contract <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS9taXNjLnJrdCIpID49L2MpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">&gt;=/c</a></span><span class="stt"> </span><span class="RktVal">0.0</span><span class="RktPn">)</span>.  The second case specifies a function with a single argument, <span class="RktSym">data</span> that muct match the contract <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span> and returns a single result that must match the contract <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS9taXNjLnJrdCIpID49L2MpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">&gt;=/c</a></span><span class="stt"> </span><span class="RktVal">0.0</span><span class="RktPn">)</span>.</div></p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">&gt; (require (planet williams/science/statistics))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (variance #(1 2 3 4))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1.6666666666666665</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (variance #(1 2 3 4) 2.5)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1.6666666666666665</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (variance #(1 2 3 4) 'a)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">top-level broke the contract</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(case-&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(-&gt; (vectorof real?) real? (&gt;=/c 0.0))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(-&gt; (vectorof real?) (&gt;=/c 0.0)))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">on variance; expected &lt;real?&gt;, given: a</span></span></p></td></tr></table></p><h5>3.1.3<tt>&nbsp;</tt><a name="(part._.Interparameter_.Constraints)"></a>Interparameter Constraints</h5><p><span style="font-weight: bold">Example:</span> <span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._weighted-mean%29%29" class="RktValLink" data-pltdoc="x">weighted-mean</a></span> from the statistics module.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L3ByaXZh%0D%0AdGUvcHJvdmlkZS5ya3QiKSBwcm92aWRlL2NvbnRyYWN0KSkp%0D%0A" class="RktStxLink" data-pltdoc="x">provide/contract</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._weighted-mean%29%29" class="RktValLink" data-pltdoc="x">weighted-mean</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L2NvbnRyYWN0L2Jhc2Uu%0D%0Acmt0IikgLT4pKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">data</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS9taXNjLnJrdCIpIGFuZC9jKSkp%0D%0A" class="RktValLink" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgobGliICJyYWNrZXQvY29udHJhY3QvcHJpdmF0%0D%0AZS92ZWN0b3Iucmt0IikgdmVjdG9yb2YpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZm9ybSAoKGxpYiAicmFja2V0L3ByaXZhdGUvYmFzZS5y%0D%0Aa3QiKSBsYW1iZGEpKSk%3D%0D%0A" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpID0pKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHZlY3Rvci1sZW5n%0D%0AdGgpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vector-length</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHZlY3Rvci1sZW5n%0D%0AdGgpKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">vector-length</a></span><span class="hspace">&nbsp;</span><span class="RktSym">data</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The contract specified a function that takes two arguments.  The first argument, <span class="RktSym">w</span> must be a vector of real numbers.  The second argument, <span class="RktSym">data</span>, must be a vector of real numbers that must be the same length as <span class="RktSym">w</span>.  The function returns one result that must match the contract <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIHJlYWw%2FKSkp%0D%0A" class="RktValLink" data-pltdoc="x">real?</a></span>.</div></p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">&gt; (require (planet williams/science/statistics))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (weighted-mean #(1 2 3 4) #(4 3 2 1))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2.0</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt; (weighted-mean #(1 2 3 4) #(4 3 2))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">top-level broke the contract</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(-&gt;r ((w ...) (data ...)) ...)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">on weighted-mean; expected &lt;(and/c (vectorof real?) ...\0\statistics.ss:152:21)&gt;, given: #(4 3 2)</span></span></p></td></tr></table></p><h5>3.1.4<tt>&nbsp;</tt><a name="(part._.Unchecked_.Operations)"></a>Unchecked Operations</h5><p>Constraint checking does incur an execution-time penalty that the user may wish to avoid. For example, the algorithm for the <span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._median-from-sorted-data%29%29" class="RktValLink" data-pltdoc="x">median-from-sorted-data</a></span> function has a computation complexity of <span style="font-style: italic">O</span>(<span style="font-style: italic"></span>1<span style="font-style: italic"></span>)<span style="font-style: italic"></span>, but the constraint check to insure the input is indeed a sorted sequence has a computational complexity of <span style="font-style: italic">O</span>(<span style="font-style: italic">n</span>)<span style="font-style: italic"></span>. Many of the routines in the Science Collection have a unchecked variant that avoids the constraint check. These functions have "unchecked-" prepended to the corresponding function name. For example, <span class="RktSym"><a href="statistics.html#%28def._%28%28planet._statistics..rkt._%28williams._science..plt._4._7%29%29._unchecked-median-from-sorted-data%29%29" class="RktValLink" data-pltdoc="x">unchecked-median-from-sorted-data</a></span> does not check its argument&rsquo;s constraints.</p><p>In general, constraint checking is a good thing. The unchecked versions of functions should only be called when it is known that the arguments do indeed meet their constraints. As of Version 4.0 of the Science Collection, some operations internally use &rsquo;unsafe&rsquo; operations for efficiency. Arguments that don&rsquo;t match their constraints may result in crashing the run-time system.</p><h4>3.2<tt>&nbsp;</tt><a name="(part._.Infinities_and_.Not-a-.Number)"></a>Infinities and Not-a-Number</h4><p>Racket provides <span class="RktVal">+inf.0</span> (positive infinity), <span class="RktVal"><span class="nobreak">-i</span>nf.0</span> (negative infinity), <span class="RktVal">+nan.0</span> (not-a-number), and <span class="RktVal">+nan.0</span> (same as <span class="RktVal">+nan.0</span>).  In general these are contagious and are passed as the result in subsequent numerical computations.  However, operations with infinities and zero (both exact and inecact) can give non-intuitive results.  For example:</p><ul><li><p><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpICopKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">*</a></span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">+inf.0</span><span class="RktPn">)</span> &#8594; 0</p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIC8pKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">/</a></span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">+inf.0</span><span class="RktPn">)</span> &#8594; 0</p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIC8pKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">/</a></span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal"><span class="nobreak">-i</span>nf.0</span><span class="RktPn">)</span> &#8594; 0</p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpICopKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">*</a></span><span class="stt"> </span><span class="RktVal">0.0</span><span class="stt"> </span><span class="RktVal">+inf.0</span><span class="RktPn">)</span> &#8594; <span class="RktVal">+nan.0</span></p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKHEgZGVmICgocXVvdGUgIyVrZXJuZWwpIC8pKSk%3D%0D%0A" class="RktValLink" data-pltdoc="x">/</a></span><span class="stt"> </span><span class="RktVal">0.0</span><span class="stt"> </span><span class="RktVal"><span class="nobreak">-i</span>nf.0</span><span class="RktPn">)</span> &#8594; -0.0</p></li></ul><p>Note that some of these may break naive algorithms.</p><p>The Science Collection uses infinities to represent overflow&#8212;<wbr></wbr><span class="RktVal">+inf.0</span> for positive overflow and <span class="RktVal"><span class="nobreak">-i</span>nf.0</span> for negative overflow.  This is used in cases where the arguments to the function are within the range of the function, but the (absolute value of) result is too large to be represented.  For example, <span class="RktPn">(</span><span class="RktSym"><a href="special-functions.html#%28def._%28%28planet._gamma..rkt._%28williams._science..plt._4._7%29._special-functions%29._gamma%29%29" class="RktValLink" data-pltdoc="x">gamma</a></span><span class="stt"> </span><span class="RktVal">200.0</span><span class="RktPn">)</span> &#8594; <span class="RktVal">+inf.0</span>.</p><p>The Science Collection uses inexact zero to represent underflow&#8212;<wbr></wbr><span class="RktVal">0.0</span> for positive underflow and <span class="RktVal"><span class="nobreak">-0</span>.0</span> for negative underflow.  This is used in cases where the arguments to the function are within the range of the function, but the (absolute value of) the result is too small to be represented.</p><p>The Science Collection uses <span class="RktVal">+nan.0</span> for domain errors&#8212;<wbr></wbr>where the arguments match the contract, but the value cannot be computed.  For example <span class="RktPn">(</span><span class="RktSym"><a href="special-functions.html#%28def._%28%28planet._gamma..rkt._%28williams._science..plt._4._7%29._special-functions%29._gamma%29%29" class="RktValLink" data-pltdoc="x">gamma</a></span><span class="stt"> </span><span class="RktVal">0.0</span><span class="RktPn">)</span> &#8594; <span class="RktVal">+nan.0</span>.</p><h4>3.3<tt>&nbsp;</tt><a name="(part._.Exceptions)"></a>Exceptions</h4><p>In Racket, an <a name="(tech._exception)"></a><span style="font-style: italic">exception</span> is a change in control flow, typically as the result of an error.</p><p>The Science Collection attempts to catch as many errors as possible using contracts.  Contracts raise exceptions when violated.</p><p>The Science Collection may raise exceptions for errors other than underflow, overflow, and domain errors.  Also, the underlying functions and/or modules used by the Science Collection may raise exceptions, as may errors in the implementation.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="using.html" title="backward to &quot;2 Using the Science Collection&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Science Collection: Reference Manual&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="mathematical-functions.html" title="forward to &quot;4 Mathematical Functions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>